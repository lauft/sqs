PREFIX=@prefix@
BINDIR=@bindir@
VARDIR=@vardir@

FILES=sqsrunner \
      sqslock \
      sqsunlock \
      sqsadmin

SQSFILES=$(addprefix $(BINDIR)/,$(FILES))

SETUP=Makefile sqsconfig

default: $(SQSFILES) $(SETUP)
	@echo "Run 'configure' and then 'make install'"

install: $(BINDIR) $(VARDIR) $(SQSFILES)

setup: $(SETUP)

$(SETUP): Makefile.in sqsconfig.in
	@echo "Running 'configure'..."
	@cat config.status 2>/dev/null | xargs ./configure --no-create

$(BINDIR) $(VARDIR):
	@mkdir -p $(VARDIR)
	@mkdir -p $(BINDIR)

$(BINDIR)/%: %
	@cp -v $< $@	
	@chmod 754 $@	

clean:
	@rm -f Makefile
	@rm -f sqsconfig
