#!/bin/bash

################################################################################
# SQS - a simple queuing system                                                #
# Copyright (C) 2011, 2012 by Thomas Lauf                                      #
#                                                                              #
# This file is part of SQS.                                                    #
#                                                                              #
# SQS is free software: you can redistribute it and/or modify                  #
# it under the terms of the GNU General Public License as published by         #
# the Free Software Foundation, either version 3 of the License, or            #
# (at your option) any later version.                                          #
#                                                                              #
# SQS is distributed in the hope that it will be useful,                       #
# but WITHOUT ANY WARRANTY; without even the implied warranty of               #
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the                #
# GNU General Public License for more details.                                 #
#                                                                              #
# You should have received a copy of the GNU General Public License            #
# along with SQS.  If not, see <http://www.gnu.org/licenses/>.                 #
#                                                                              #
################################################################################

################################################################################
#                                                                              #
#                                                                              #
################################################################################

progname=${0}
command=${1}
shift

function list_commands()
{
echo "Available commands:"
  for cmd in $(ls ${progname}-*); do
    echo "- ${cmd#${progname}-}"
  done
}

function print_usage()
{
cat << EOF
SQS, a simple queuing system.

Usage: ${progname##*/} <command> [<options/arguments>]

EOF
list_commands
}

if [[ "x${command}" == "xhelp" || "x${command}" == "x--help" ]] ; then
  print_usage
  exit
fi

if [ "x${command}" == "x" ] ; then
  echo "no command given!"
  list_commands
  exit 1
fi

if [ ! -x "${progname}-${command}" ] ; then
  echo "unknown command '${command}'!"
  exit 2
fi

${progname}-${command} $*

# EOF
