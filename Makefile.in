PREFIX=@prefix@
BINDIR=@bindir@
VARDIR=@vardir@

FILES=sqsconfig \
      sqs \
      sqsrunner \
      sqslock \
      sqsunlock \
      sqsgetopt \
      sqsupdate \
      sqsset \
      sqsclose \
      sqsadmin

SQSADMIN=sqsadmin_head \
         sqsadmin_list \
         sqsadmin_remove \
         sqsadmin_kill \
         sqsadmin_utils \
         sqsadmin_foot

SQSFILES=$(addprefix $(BINDIR)/,$(FILES))

SETUP=sqsconfig

default: $(SETUP)
	@echo "Run 'make install' to install SQS"

install: $(BINDIR) $(VARDIR) $(SQSFILES)

$(SETUP): Makefile.in sqsconfig.in
	@echo "Re-Running 'configure'..."
	@cat config.status 2>/dev/null | xargs ./configure

sqsadmin: $(SQSADMIN)
	@cat $(SQSADMIN) > sqsadmin

$(BINDIR) $(VARDIR):
	@mkdir -p $(VARDIR)
	@mkdir -p $(BINDIR)

$(BINDIR)/sqsconfig: sqsconfig
	@cp -v $< $@
	@chmod 644 $@	

$(BINDIR)/%: %
	@cp -v $< $@	
	@chmod 755 $@	

clean:
	@rm -f Makefile
	@rm -f sqsconfig
